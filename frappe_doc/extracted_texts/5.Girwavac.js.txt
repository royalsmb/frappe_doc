import{a as p,t as b,c as kt,e as Ft,n as tt}from"../chunks/BEN_y2CW.js";import{i as ke}from"../chunks/osMEgwvh.js";import{t as z,F as a,G as t,c as l,g as e,p as ve,f as be,b as ue,ac as ze,s as f,K as Ct,C as Be,aK as Ze,m as J,J as Jt,l as he,a as Wt,o as Xt,L as Yt}from"../chunks/BmdC9-2Z.js";import{e as P,s as q,d as St}from"../chunks/DjkWHii8.js";import{i as H}from"../chunks/BkN_-G9U.js";import{j as Ae,e as de,i as Me,z as Zt,A as ht,t as _e,B as $t,y as et,D as ea,E as je,F as Ot,G as $,H as ta,x as aa,q as ra,I as sa,w as ce,h as oa,k as na,b as la,a as ia,J as ca,K as bt,M as da,N as va,O as ua,P as fa,Q as ma,s as pa,R as ga,g as $e,S as ha,T as Nt,C as ba,U as xt,V as yt}from"../chunks/a-IolG5s.js";import{r as we,a as re,t as xa,b as Pe,e as ya}from"../chunks/BN5Zr6Pz.js";import{p as W,b as Ee,c as ae,s as qe,a as At,m as _a}from"../chunks/DGLH9pEx.js";import{S as wa,A as _t}from"../chunks/Y2APZMuI.js";import{S as ka,b as Ca,q as wt}from"../chunks/DPUz-yn9.js";var Sa=b('<div class="relative w-full"><div class="pointer-events-none absolute inset-y-0 start-0 flex items-center ps-3"><!></div> <input class="border-secondary/300 block w-full rounded border bg-gray-50 p-4 ps-10 text-sm text-secondary focus:border-accent focus:ring-accent" id="default-search" type="search"></div>');function Oa(V,s){let m=W(s,"placeholder",3,""),x=W(s,"value",15,"");var r=Sa(),c=a(r),v=a(c);wa(v),t(c);var y=l(c,2);we(y),t(r),z(()=>re(y,"placeholder",m())),Ae(y,x),p(V,r)}var Na=b('<button class="item-outline min-w-[100px] rounded-lg !border-4 p-2 capitalize transition-colors"> </button>'),Aa=b('<section class="flex flex-col gap-1"><h3 class="subheading">Categories</h3> <div class="scrollbar flex h-[calc(100vh-130px)] flex-col gap-3 overflow-y-auto"></div></section>');function Ma(V){const[s,m]=Ee(),x=()=>ae(Zt,"$categories",s),r=()=>ae(ht,"$activeCategory",s);var c=Aa(),v=l(a(c),2);de(v,5,x,Me,(y,S)=>{var g=Na(),u=a(g,!0);t(g),z(()=>{xa(g,"active",r()===e(S)),q(u,e(S))}),P("click",g,()=>qe(ht,e(S))),p(y,g)}),t(v),t(c),p(V,c),m()}var Pa=b('<p class="text-sm text-gray-600"> </p>'),qa=b('<button class="w-full rounded-lg border p-4 text-left hover:border-accent/50 hover:bg-accent/5 disabled:cursor-not-allowed disabled:opacity-50"><div class="flex items-center justify-between"><div><p class="font-medium"> </p> <p class="text-sm text-gray-600"> </p></div> <div class="text-right"><p class="font-medium"> </p> <!></div></div></button>'),ja=b('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"><div class="w-full max-w-md rounded-lg bg-white p-6 shadow-xl"><h2 class="mb-4 text-xl font-semibold">Select Variant</h2> <div class="max-h-[50vh] space-y-2 overflow-y-auto pr-2"></div> <div class="mt-4 flex justify-end"><button class="rounded-lg px-4 py-2 text-gray-600 hover:bg-gray-100">Cancel</button></div></div></div>');function Mt(V,s){ve(s,!1);let m=W(s,"isOpen",8,!1),x=W(s,"onClose",8),r=W(s,"product",8),c=W(s,"onSelect",8);function v(u){c()(u),x()()}ke();var y=kt(),S=be(y);{var g=u=>{var j=ja(),h=a(j),_=l(a(h),2);de(_,5,()=>r().variants||[],Me,(A,k)=>{var T=qa(),E=a(T),I=a(E),K=a(I),C=a(K,!0);t(K);var d=l(K,2),M=a(d,!0);t(d),t(I);var Q=l(I,2),se=a(Q),fe=a(se);t(se);var B=l(se,2);{var X=ee=>{var oe=Pa(),L=a(oe);t(oe),z(()=>q(L,`Stock: ${e(k).qty??""}`)),p(ee,oe)};H(B,ee=>{r().is_stock&&ee(X)})}t(Q),t(E),t(T),z(()=>{T.disabled=e(k).qty===0&&r().is_stock,q(C,e(k).name),q(M,e(k).product_name),q(fe,`D${e(k).price??""}`)}),P("click",T,()=>v(e(k))),p(A,T)}),t(_);var D=l(_,2),w=a(D);t(D),t(h),t(j),P("click",w,function(...A){var k;(k=x())==null||k.apply(this,A)}),_e(3,h,()=>et,()=>({duration:150})),_e(3,j,()=>et,()=>({duration:200})),P("click",j,$t(function(...A){var k;(k=x())==null||k.apply(this,A)})),p(u,j)};H(S,u=>{m()&&u(g)})}p(V,y),ue()}var Da=b('<div><div class="flex h-[--size] w-[--size] items-center justify-center rounded bg-[--color]"><div class="text-[22px] font-bold uppercase text-black"> </div></div></div>');function Ta(V,s){ve(s,!1);let m=W(s,"name",8,"John Doe"),x=W(s,"size",8,"49px"),r=W(s,"class",8,"");ke();var c=Da(),v=a(c),y=a(v),S=a(y,!0);t(y),t(v),t(c),z((g,u)=>{re(c,"style",`--size: ${x()??""}`),Pe(c,`w-[--size] ${r()??""}`),re(v,"style",`--color: ${g??""}`),q(S,u)},[ea,()=>m().split(" ").reduce((g,u)=>g+u.charAt(0),"")],ze),p(V,c),ue()}function La(V,s,m,x){var r;e(s)&&((r=m.product.variants)!=null&&r.length?f(x,!0):je(m.product))}var Va=b('<img class="h-full w-full object-cover transition-transform duration-300 group-hover:scale-110">'),za=b('<span class="absolute left-2 top-2 rounded bg-white/90 px-2 py-1 text-sm font-medium text-secondary shadow-sm"> </span>'),Ba=b('<span class="absolute right-2 top-2 rounded bg-accent/90 px-2 py-1 text-sm font-medium text-white shadow-sm">Variants</span>'),Ea=b('<!> <button class="group relative h-full w-full overflow-hidden rounded-lg border-2 border-secondary/30 bg-white p-1 hover:border-accent/50 hover:shadow-sm disabled:cursor-not-allowed disabled:opacity-50 disabled:shadow-none disabled:hover:border-secondary/30 xl:p-2"><div class="relative aspect-square max-h-40 w-full overflow-hidden rounded-lg bg-gray-100"><!> <!> <!></div> <div class="mt-2 text-left"><h3 class="font-medium text-gray-900"> </h3> <p class="text-sm text-gray-500"> </p> <p class="mt-1 font-medium text-secondary"> </p></div></button>',1);function Ia(V,s){ve(s,!0);let m=Ct(!1),x=Be(()=>!s.product.is_stock||s.product.is_stock&&s.product.qty);function r(d){je(s.product,d)}var c=Ea(),v=be(c);Mt(v,{onClose:()=>f(m,!1),onSelect:r,get product(){return s.product},get isOpen(){return e(m)},set isOpen(d){f(m,At(d))}});var y=l(v,2);y.__click=[La,x,s,m];var S=a(y),g=a(S);{var u=d=>{var M=Va();z(()=>{re(M,"src",s.product.image),re(M,"alt",s.product.name)}),p(d,M)},j=d=>{Ta(d,{size:"100%",class:"!h-full",get name(){return s.product.product_name}})};H(g,d=>{s.product.image?d(u):d(j,!1)})}var h=l(g,2);{var _=d=>{var M=za(),Q=a(M,!0);t(M),z(()=>q(Q,s.product.qty)),p(d,M)};H(h,d=>{s.product.is_stock&&d(_)})}var D=l(h,2);{var w=d=>{var M=Ba();p(d,M)};H(D,d=>{var M;(M=s.product.variants)!=null&&M.length&&d(w)})}t(S);var A=l(S,2),k=a(A),T=a(k,!0);t(k);var E=l(k,2),I=a(E,!0);t(E);var K=l(E,2),C=a(K);t(K),t(A),t(y),z(()=>{y.disabled=!e(x),q(T,s.product.product_name),q(I,s.product.name),q(C,`D ${s.product.price??""}`)}),p(V,c),ue()}St(["click"]);function Ka(V,s,m,x){var r;e(s)&&((r=m.product.variants)!=null&&r.length?f(x,!0):je(m.product))}var Ha=b('<img class="h-10 w-10 rounded-lg object-cover">'),Ra=b('<div class="h-10 w-10 rounded-lg bg-gray-100"></div>'),Ua=b('<span class="ml-2 rounded bg-accent/90 px-1.5 py-0.5 text-xs font-medium text-white">Variants</span>'),Ga=b('<!> <tr><td class="p-3"><div class="flex items-center gap-3"><!> <div> <!></div></div></td><td class="p-3 text-right"> </td><td> </td></tr>',1);function Qa(V,s){ve(s,!0);let m=Ct(!1),x=Be(()=>!s.product.is_stock||s.product.is_stock&&s.product.qty),r=Be(()=>s.product.is_stock&&Number(s.product.qty||0)<=5&&Number(s.product.qty||0)>1);function c(C){je(s.product,C)}var v=Ga(),y=be(v);Mt(y,{onClose:()=>f(m,!1),onSelect:c,get product(){return s.product},get isOpen(){return e(m)},set isOpen(C){f(m,At(C))}});var S=l(y,2);S.__click=[Ka,x,s,m];var g=a(S),u=a(g),j=a(u);{var h=C=>{var d=Ha();z(()=>{re(d,"src",s.product.image),re(d,"alt",s.product.name)}),p(C,d)},_=C=>{var d=Ra();p(C,d)};H(j,C=>{s.product.image?C(h):C(_,!1)})}var D=l(j,2),w=a(D),A=l(w);{var k=C=>{var d=Ua();p(C,d)};H(A,C=>{var d;(d=s.product.variants)!=null&&d.length&&C(k)})}t(D),t(u),t(g);var T=l(g),E=a(T);t(T);var I=l(T),K=a(I,!0);t(I),t(S),z(()=>{Pe(S,`cursor-pointer border-b ${(e(x)?"hover:bg-gray-50":"cursor-not-allowed")??""}`),q(w,`${s.product.name??""} `),q(E,`D ${s.product.price??""}`),Pe(I,`p-3 text-right ${(e(r)?"text-yellow-600 ":e(x)?"":"text-red-600")??""}`),q(K,s.product.qty??"N/A")}),p(V,v),ue()}St(["click"]);var Fa=tt('<svg class="h-4 w-4 animate-spin" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Adding...',1),Ja=b('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"><div class="w-full max-w-md rounded-lg bg-white p-6 shadow-lg"><h3 class="mb-4 text-lg font-semibold">Add New Customer</h3> <form class="flex flex-col gap-4"><div><label for="customer_name" class="mb-1 block text-sm font-medium text-gray-700">Name *</label> <input type="text" id="customer_name" required class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-accent focus:outline-none"></div> <div><label for="phone" class="mb-1 block text-sm font-medium text-gray-700">Phone *</label> <input type="tel" id="phone" required class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-accent focus:outline-none"></div> <div><label for="email" class="mb-1 block text-sm font-medium text-gray-700">Email</label> <input type="email" id="email" class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-accent focus:outline-none"></div> <div class="flex justify-end gap-3"><button type="button" class="rounded-md bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200">Cancel</button> <button type="submit" class="flex items-center gap-2 rounded-md bg-accent px-4 py-2 text-sm font-medium text-white hover:bg-accent/90 disabled:opacity-50"><!></button></div></form></div></div>');function Wa(V,s){ve(s,!1);let m=W(s,"isOpen",8,!1),x=W(s,"onClose",8),r=W(s,"onSubmit",8),c=J({customer_name:"",phone:"",email:""}),v=J(!1);async function y(){if(e(c).customer_name){f(v,!0);try{await r()(e(c)),f(c,{customer_name:"",phone:"",email:""})}finally{f(v,!1)}}}function S(){f(c,{customer_name:"",phone:"",email:""}),x()()}ke();var g=kt(),u=be(g);{var j=h=>{var _=Ja(),D=a(_),w=l(a(D),2),A=a(w),k=l(a(A),2);we(k),t(A);var T=l(A,2),E=l(a(T),2);we(E),t(T);var I=l(T,2),K=l(a(I),2);we(K),t(I);var C=l(I,2),d=a(C),M=l(d,2),Q=a(M);{var se=B=>{var X=Fa();Jt(),p(B,X)},fe=B=>{var X=Ft("Add Customer");p(B,X)};H(Q,B=>{e(v)?B(se):B(fe,!1)})}t(M),t(C),t(w),t(D),t(_),z(()=>M.disabled=e(v)||!e(c).customer_name),Ae(k,()=>e(c).customer_name,B=>Ze(c,e(c).customer_name=B)),Ae(E,()=>e(c).phone,B=>Ze(c,e(c).phone=B)),Ae(K,()=>e(c).email,B=>Ze(c,e(c).email=B)),P("click",d,S),P("submit",w,Ot(y)),_e(3,_,()=>et),p(h,_)};H(u,h=>{m()&&h(j)})}p(V,g),ue()}var Xa=b('<div class="flex h-5 w-5 items-center justify-center rounded-full bg-accent/10 text-xs font-medium text-accent"> </div>'),Ya=b('<div class="flex items-center gap-1.5 rounded-full border border-gray-100 bg-white px-3 py-1.5 text-sm shadow-sm"><span class="text-secondary"> </span> <button class="text-red-400 transition-colors hover:text-red-600 svelte-11yptvf">Ã—</button></div>'),Za=b('<button aria-label="Tag" type="button"> </button>'),$a=b('<div class="py-1"><div class="bg-gray-50 px-3 py-1 text-xs font-medium text-gray-500"> </div> <!></div>'),er=b('<div role="button" aria-label="Suggestions" class="absolute z-10 mt-1 max-h-48 w-full overflow-y-auto rounded-lg border border-gray-200 bg-white py-1 shadow-lg"></div>'),tr=b('<tr class="relative border-b bg-light/5"><td class="absolute left-0 top-0 h-full w-1 bg-accent/20 svelte-11yptvf"></td><td colspan="6" class="px-6 py-4 svelte-11yptvf"><div class="flex flex-col gap-3"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-4 w-4 text-accent"><path stroke-linecap="round" stroke-linejoin="round" d="M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M6 6h.008v.008H6V6z"></path></svg> <h3 class="text-sm font-medium text-secondary">Notes & Tags</h3></div> <div class="flex flex-wrap gap-2"></div> <form class="mt-1 flex items-center gap-2"><div aria-label="Add note" data-action="add-note" class="relative block max-w-xs flex-1"><input name="newNote" type="text" placeholder="Add a note or tag" class="w-full rounded-full border border-gray-200 bg-white py-2 pl-4 pr-12 text-sm text-secondary placeholder-gray-400 focus:border-accent focus:ring-1 focus:ring-accent/20"> <button aria-label="Add note" type="button" class="absolute right-1.5 top-1/2 inline-flex h-6 w-6 -translate-y-1/2 items-center justify-center rounded-full bg-accent text-white transition-colors hover:bg-accent/90 focus:ring-2 focus:ring-accent/20 svelte-11yptvf"><svg class="h-3.5 w-3.5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></button> <!></div></form></div></td></tr>'),ar=b('<tr><td class=" svelte-11yptvf"><img class="h-auto max-h-full w-6" alt=""></td><td class="font-semibold text-secondary svelte-11yptvf"> </td><td class=" svelte-11yptvf"><div class="flex items-center"><button aria-label="subtract quantity" class="me-3 inline-flex h-6 w-6 items-center justify-center rounded-full border border-secondary bg-white p-1 text-sm font-medium text-secondary hover:bg-light/50 focus:ring-secondary active:outline-none active:ring-1 svelte-11yptvf" type="button"><svg class="h-3 w-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 2"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h16"></path></svg></button> <div><input type="number" id="first_product" class="block w-14 rounded border border-secondary bg-light/10 px-2.5 py-1 text-sm text-secondary focus:border-accent focus:ring-accent" placeholder="1" required></div> <button aria-label="add quantity" class="ms-3 inline-flex h-6 w-6 items-center justify-center rounded-full border border-secondary bg-white p-1 text-sm font-medium text-secondary hover:bg-light/50 focus:ring-secondary active:outline-none active:ring-1 svelte-11yptvf" type="button"><svg class="h-3 w-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 18"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 1v16M1 9h16"></path></svg></button></div></td><td class="font-semibold text-secondary svelte-11yptvf"> </td><td class="font-semibold text-secondary svelte-11yptvf"> </td><td class="svelte-11yptvf"><div class="flex items-center gap-2"><button aria-label="Remove product" class="text-red-500 hover:text-red-700 svelte-11yptvf"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"></path></svg></button> <!></div></td></tr> <!>',1),rr=b('<button class="whitespace-nowrap rounded border border-accent p-2.5 text-accent ring-accent hover:ring-2 svelte-11yptvf">Quick Order</button>'),sr=b('<div class="flex h-[calc(100vh-90px)] flex-col justify-between gap-6"><div class="flex flex-col gap-6"><div class="grid w-full grid-cols-3 gap-3"><div class="flex gap-2"><button aria-label="Add new customer" class="mt-[28px] flex h-[42px] items-center justify-center rounded-md border border-accent px-3 text-accent hover:bg-accent/10 svelte-11yptvf"><svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" fill-rule="evenodd"></path></svg></button> <div class="flex-1"><!></div></div> <!> <!></div> <div class="scrollbar relative h-[calc(100vh-80px-152px-24px-24px-55px-4px)] overflow-auto rounded shadow"><table class="small-text w-full table-auto border-collapse border-spacing-2 select-none border border-gray-200 text-left text-secondary"><thead class="sticky top-0 bg-light text-xs uppercase text-secondary"><tr><th class="svelte-11yptvf"></th><th class="svelte-11yptvf">Product</th><th class="svelte-11yptvf">Quantity</th><th class="svelte-11yptvf">Price</th><th class="svelte-11yptvf">Amount</th><th class="svelte-11yptvf">Action</th></tr></thead><tbody></tbody></table></div></div> <!> <div class="action-btns flex items-center justify-between pb-1"><div class="text-2xl font-semibold"><span> </span></div> <div class="button-text flex justify-end gap-4"><button class="whitespace-nowrap rounded bg-attention p-2.5 svelte-11yptvf">Clear Order</button> <!> <button class="whitespace-nowrap rounded bg-accent p-2.5 svelte-11yptvf"> </button></div></div></div>');function or(V,s){ve(s,!1);const[m,x]=Ee(),r=()=>ae(sa,"$currentOrder",m),c=()=>ae(da,"$restuarantTables",m),v=()=>ae(va,"$customersOptions",m),y=()=>ae(ga,"$recentlyUpdated",m),S=J(),g=J(),u=J(),j=J();let h=J(null),_=J(""),D=J(!1),w=J(-1),A=J(void 0);const k=[{name:"Preferences",tags:["No ice","Extra ice","Less sugar","No sugar","Extra spicy","Medium spicy","Not spicy"]},{name:"Dietary",tags:["Vegetarian","Vegan","Gluten-free","Dairy-free","Allergies","Halal"]},{name:"Cooking",tags:["Well done","Medium rare","Medium well","Extra sauce","Sauce on side","No sauce"]},{name:"Service",tags:["Takeaway","Special request","Priority","Birthday special","VIP guest"]}];function T(o,n){const i=k.map(N=>({...N,tags:N.tags.filter(Y=>!n.includes(Y))})).filter(N=>N.tags.length>0);if(!o)return i;const O=o.toLowerCase();return i.map(N=>({...N,tags:N.tags.filter(Y=>Y.toLowerCase().includes(O))})).filter(N=>N.tags.length>0)}function E(o,n){if(!o.trim())return;const i=[...r().items],O=i[n].notes||[];O.includes(o.trim())||(i[n].notes=[...O,o.trim()],$({...r(),items:i}))}function I(o,n){if(o.key==="ArrowDown")o.preventDefault(),f(w,Math.min(e(w)+1,e(u).flatMap(i=>i.tags).length-1));else if(o.key==="ArrowUp")o.preventDefault(),f(w,Math.max(e(w)-1,-1));else if(o.key==="Enter"&&e(w)>=0){o.preventDefault();const i=e(u).flatMap(O=>O.tags);E(i[e(w)],n),f(_,""),f(w,-1)}else o.key==="Escape"&&(f(D,!1),f(w,-1))}const K=[{name:"Dine In",value:"dine_in"},{name:"Take Away",value:"take_away"}],C=async o=>[...c()].filter(n=>{const i=n.name.toLowerCase(),O=o.toLowerCase();return i.includes(O)||O.includes(i)}),d=async o=>[...e(M)].filter(n=>{const i=o.toLowerCase(),O=n.customer_name.toLowerCase(),N=n.is_management?"management":"",Y=n.room?`room: ${n.room}`:"",Ce=n.phone?`phone: ${n.phone}`:"";return O.includes(i)||i.includes(O)||N&&(N.includes(i)||i.includes(N))||Y&&(Y.includes(i)||i.includes(Y))||Ce&&(Ce.includes(i)||i.includes(Ce))}).sort((n,i)=>{const O=n.customer_name.toLowerCase(),N=i.customer_name.toLowerCase();return O==="walkin"||O==="walk in"||O==="walk-in"?-1:N==="walkin"||N==="walk in"||N==="walk-in"?1:O.localeCompare(N)}).map(n=>{const i=[];return n.room&&i.push(`Room: ${n.room}`),n.is_management&&i.push("Management"),n.phone&&i.push(`Phone: ${n.phone}`),{...n,infos:i}});let M=J([]),Q=J(!1);async function se(o){const{error:n,data:i}=await ta(o).load();n&&aa("error"),await ra.load(void 0,!0),i&&B(i),f(Q,!1)}const fe=()=>{setTimeout(()=>{f(_,""),f(D,!1),f(w,-1)},150)},B=o=>{$({...r(),customer:String((o==null?void 0:o.name)||(r().order_type!=="room_service"?"Walkin":"")),room:(o==null?void 0:o.room)||void 0}),f(A,{...o,value:o==null?void 0:o.name})};he(()=>e(A),()=>{var o;f(S,[...(o=e(A))!=null&&o.room?[{name:"Room Service",value:"room_service"}]:[],...K])}),he(()=>(e(h),r()),()=>{var o;f(g,e(h)?((o=r().items.find(n=>n.name===e(h)))==null?void 0:o.notes)||[]:[])}),he(()=>(e(_),e(g)),()=>{f(u,T(e(_),e(g)))}),he(()=>v(),()=>{f(M,v().sort((o,n)=>{const i=o.customer_name.toLowerCase(),O=n.customer_name.toLowerCase();return i==="walkin"||i==="walk in"||i==="walk-in"?-1:O==="walkin"||O==="walk in"||O==="walk-in"?1:i.localeCompare(O)}))}),he(()=>(r(),$),()=>{if(r()){const o=r().items.map(n=>Number(n.price)*n.quantity).reduce((n,i)=>i+n,0);$({...r(),total:o})}}),he(()=>(r(),e(A),$),()=>{var o;r()&&e(A)&&!((o=e(A))!=null&&o.room)&&r().room&&$({...r(),room:"",table:r().order_type==="room_service"?"":r().table})}),he(()=>{},()=>{f(j,!1)}),Wt(),ke();var X=sr(),ee=a(X),oe=a(ee),L=a(oe),R=a(L),ne=l(R,2),xe=a(ne);const le=ze(()=>r().customer||"Walkin");_t(xe,{label:"Customer",required:!0,noResultText:"",search:d,get keyword(){return e(le)},onCloseSelect:o=>{const n=e(M).find(i=>i.name===(o==null?void 0:o.value));console.log("customer",n),n&&B(n)},placeholder:"Search customers"}),t(ne),t(L);var ye=l(L,2);ka(ye,{label:"Order Type",onSelect:o=>{$({...r(),order_type:(o==null?void 0:o.value)||r().order_type})},get value(){return r().order_type},get options(){return e(S)}});var Pt=l(ye,2);{var qt=o=>{const n=ze(()=>r().table||"");_t(o,{noResultText:"",get keyword(){return e(n)},onCloseSelect:i=>{$({...r(),table:String((i==null?void 0:i.name)||r().table||"")})},containerClass:"w-full",label:"Table",search:C})};H(Pt,o=>{r().order_type!=="room_service"&&o(qt)})}t(oe);var at=l(oe,2),rt=a(at),st=l(a(rt));de(st,7,()=>r().items,o=>o.name,(o,n,i)=>{var O=ar(),N=be(O),Y=a(N),Ce=a(Y);t(Y);var He=l(Y),Vt=a(He,!0);t(He);var Re=l(He),dt=a(Re),vt=a(dt),Ue=l(vt,2),Te=a(Ue);we(Te),t(Ue);var zt=l(Ue,2);t(dt),t(Re);var Ge=l(Re),Bt=a(Ge);t(Ge);var Qe=l(Ge),Et=a(Qe);t(Qe);var ut=l(Qe),ft=a(ut),mt=a(ft),It=l(mt,2);{var Kt=F=>{var U=Xa(),me=a(U,!0);t(U),z(()=>q(me,e(n).notes.length)),p(F,U)};H(It,F=>{var U;(U=e(n).notes)!=null&&U.length&&F(Kt)})}t(ft),t(ut),t(N);var Ht=l(N,2);{var Rt=F=>{var U=tr(),me=l(a(U)),pt=a(me),Fe=l(a(pt),2);de(Fe,5,()=>e(n).notes||[],Me,(G,Z,ie)=>{var te=Ya(),pe=a(te),Oe=a(pe,!0);t(pe);var Xe=l(pe,2);t(te),z(()=>q(Oe,e(Z))),P("click",Xe,ce(()=>{var Le;const Ne=[...r().items];Ne[e(i)].notes=(Le=Ne[e(i)].notes)==null?void 0:Le.filter((Ve,ge)=>ge!==ie),$({...r(),items:Ne})})),p(G,te)}),t(Fe);var Je=l(Fe,2),We=a(Je),Se=a(We);we(Se);var gt=l(Se,2),Ut=l(gt,2);{var Gt=G=>{var Z=er();de(Z,5,()=>e(u),Me,(ie,te)=>{var pe=$a(),Oe=a(pe),Xe=a(Oe,!0);t(Oe);var Ne=l(Oe,2);de(Ne,1,()=>e(te).tags,Me,(Le,Ve)=>{var ge=Za(),Qt=a(ge,!0);t(ge),z(Ye=>{Pe(ge,`w-full px-4 py-2 text-left text-sm hover:bg-light/30 ${Ye??""} svelte-11yptvf`),q(Qt,e(Ve))},[()=>e(w)===e(u).flatMap(Ye=>Ye.tags).indexOf(e(Ve))?"bg-light/50":""],ze),P("click",ge,()=>{E(e(Ve),e(i)),f(_,""),f(D,!1),f(w,-1)}),p(Le,ge)}),t(pe),z(()=>q(Xe,e(te).name)),p(ie,pe)}),t(Z),z(()=>re(Z,"aria-expanded",e(D))),_e(3,Z,()=>$e,()=>({duration:200})),P("click",Z,ce(()=>{})),p(G,Z)};H(Ut,G=>{e(D)&&e(u).length>0&&G(Gt)})}t(We),oa(We,(G,Z)=>{var ie;return(ie=na)==null?void 0:ie(G,Z)},()=>fe),t(Je),t(pt),t(me),t(U),Ae(Se,()=>e(_),G=>f(_,G)),P("focus",Se,()=>f(D,!0)),P("keydown",Se,G=>I(G,e(i))),P("click",gt,ce(()=>{e(_).trim()&&(E(e(_),e(i)),f(_,""),f(D,!1),f(w,-1))})),P("submit",Je,Ot(ce(G=>{const ie=new FormData(G.target).get("newNote");if(ie.trim()){const te=[...r().items];te[e(i)].notes=[...te[e(i)].notes||[],ie.trim()],$({...r(),items:te}),G.target.reset()}}))),_e(3,U,()=>$e,()=>({easing:wt,duration:300})),p(F,U)};H(Ht,F=>{e(h)===e(n).name&&F(Rt)})}z(()=>{Pe(N,`relative cursor-pointer border-b ${(e(h)===e(n).name?"z-10 bg-light/10":"")??""} ${(y()===e(n).name?"bg-light/50":"bg-white hover:bg-light/30")??""}`),re(Ce,"src",e(n).image),q(Vt,e(n).name),ya(Te,e(n).quantity),q(Bt,`D${e(n).price??""}`),q(Et,`D${e(n).price*r().items[e(i)].quantity}`)}),P("click",vt,ce(()=>ua(e(n).name))),P("click",Te,ce(function(F){Ca.call(this,s,F)})),P("input",Te,F=>{var me;const U=r().items;U[e(i)].quantity=Number(((me=F==null?void 0:F.target)==null?void 0:me.value)||0),$({...r(),items:U})}),P("click",zt,ce(()=>fa(e(n).name))),P("click",mt,ce(()=>{ma(e(n).name)})),P("click",N,()=>f(h,e(h)===e(n).name?null:e(n).name)),_e(3,N,()=>$e,()=>({easing:wt,duration:500})),p(o,O)}),t(st),t(rt),t(at),t(ee);var ot=l(ee,2);Wa(ot,{get isOpen(){return e(Q)},onClose:()=>f(Q,!1),onSubmit:se});var nt=l(ot,2),Ie=a(nt),lt=a(Ie),jt=a(lt);t(lt),t(Ie);var it=l(Ie,2),Ke=a(it),Dt=Be(()=>pa(bt,"Are you sure you want to clear order?")),ct=l(Ke,2);{var Tt=o=>{var n=rr();z(()=>n.disabled=!r().total||e(j)),P("click",n,()=>{qe(la,{...r(),is_quick_order:1}),qe(ia,!0)}),p(o,n)};H(ct,o=>{r().order_id||o(Tt)})}var De=l(ct,2),Lt=a(De,!0);t(De),t(it),t(nt),t(X),z(()=>{q(jt,`D${r().total??""}`),Ke.disabled=!r().total||!!r().order_id,De.disabled=!r().total||e(j),q(Lt,r().order_id?"Update Order":"Place Order")}),P("click",R,()=>{f(Q,!0)}),P("click",Ke,function(...o){var n;(n=e(Dt))==null||n.apply(this,o)}),P("click",De,async()=>{const o=await ca({...r(),is_quick_order:0});o||bt(),console.error(o)}),p(V,X),ue(),x()}function nr(V,s){ve(s,!1);const[m,x]=Ee(),r=()=>ae(Nt,"$displayProducts",m);let c=W(s,"onScan",8),v="",y=0;const S=50;function g(u){const j=Date.now();if(j-y>S&&v.length>0&&(v=""),y=j,/[\w]/.test(u.key)&&!u.ctrlKey&&!u.altKey&&!u.metaKey&&(v+=u.key),u.key==="Enter"&&v.length>0){if(v=v.replace("Enter","").trim(),v.length===0)return;console.log("Scanning barcode: ",v);const h=ha(v,r());h&&c()(h),v="",u.preventDefault(),u.stopImmediatePropagation(),u.stopPropagation()}}Xt(()=>{window.addEventListener("keydown",g)}),Yt(()=>{window.removeEventListener("keydown",g)}),ke(),ue(),x()}var lr=tt('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>'),ir=tt('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="3" y="3" width="7" height="7" rx="1" stroke-width="2"></rect><rect x="14" y="3" width="7" height="7" rx="1" stroke-width="2"></rect><rect x="3" y="14" width="7" height="7" rx="1" stroke-width="2"></rect><rect x="14" y="14" width="7" height="7" rx="1" stroke-width="2"></rect></svg>'),cr=b('<div class="w-full"><!></div>'),dr=b('<div class="scrollbar xxl:grid-cols-5 mt-2 grid h-[calc(100vh-200px)] grid-cols-2 place-content-start gap-2 overflow-y-scroll lg:grid-cols-3"></div>'),vr=b('<div class="scrollbar mt-2 h-[calc(100vh-200px)] overflow-y-scroll"><table class="w-full border-collapse"><thead class="sticky top-0 bg-white"><tr class="border-b text-left"><th class="p-3">Name</th><th class="p-3 text-right">Price</th><th class="p-3 text-right">Stock</th></tr></thead><tbody></tbody></table></div>'),ur=b('<div class="col-span-5 flex gap-4"><!> <section class="flex w-full flex-col gap-1"><h3 class="subheading flex items-center gap-2">Products <span class="h-[32px] rounded-lg bg-gray-100 p-2 text-sm text-secondary"> </span></h3> <div class="flex justify-between gap-8"><!> <button class="flex items-center gap-2 rounded-lg bg-gray-100 p-4 text-sm text-secondary hover:bg-gray-200"><!></button></div> <!></section></div> <div class="col-span-5 h-full pl-4 pr-1"><!></div>',1),fr=b("<!> <!>",1);function Cr(V,s){ve(s,!1);const[m,x]=Ee(),r=()=>ae(Nt,"$displayProducts",m),c=()=>ae(xt,"$search",m),v=()=>ae(yt,"$isGridView",m);let y=0;function S(h){var _;(!h.is_stock||h.is_stock&&h.qty)&&((_=h.variants)!=null&&_.length||je(h))}ke();var g=fr(),u=be(g);nr(u,{onScan:S});var j=l(u,2);ba(j,{class:"grid flex-grow grid-cols-10 overflow-hidden",children:(h,_)=>{var D=ur(),w=be(D),A=a(w);Ma(A);var k=l(A,2);re(k,"style",`--category: ${y}px;`);var T=a(k),E=l(a(T)),I=a(E,!0);t(E),t(T);var K=l(T,2),C=a(K);Oa(C,{get value(){return _a(),c()},set value(L){qe(xt,L)},$$legacy:!0});var d=l(C,2),M=a(d);{var Q=L=>{var R=lr();p(L,R)},se=L=>{var R=ir();p(L,R)};H(M,L=>{v()?L(Q):L(se,!1)})}t(d),t(K);var fe=l(K,2);{var B=L=>{var R=dr();de(R,5,r,ne=>ne.name,(ne,xe)=>{var le=cr(),ye=a(le);Ia(ye,{get product(){return e(xe)}}),t(le),p(ne,le)}),t(R),p(L,R)},X=L=>{var R=vr(),ne=a(R),xe=l(a(ne));de(xe,5,r,le=>le.name,(le,ye)=>{Qa(le,{get product(){return e(ye)}})}),t(xe),t(ne),t(R),p(L,R)};H(fe,L=>{v()?L(B):L(X,!1)})}t(k),t(w);var ee=l(w,2),oe=a(ee);or(oe,{}),t(ee),z(()=>q(I,r().length)),P("click",d,()=>qe(yt,!v())),p(h,D)},$$slots:{default:!0}}),p(V,g),ue(),x()}export{Cr as component};
