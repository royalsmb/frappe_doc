import{d as ht,h as U,i as ie,at as gt,e as vt,g as Ce,H as _t,r as Ee,j as ce,u as J,aO as Q,k as Ve,n as Be,q as yt,ar as He,ah as Z,R as ee,aP as _e,aw as Re,aQ as ye,aR as bt,aq as wt,aS as St,aE as kt,aT as We,aj as At,ac as Ot,W as Tt,an as Lt,ag as je,aU as Ct,X as Et,O as xe,aV as Rt,al as xt,aF as Je,x as ae,aW as se,B as Ut,aM as Ft,E as $t,aX as It,aY as Mt,aZ as Nt,a_ as Pt,Y as G,a$ as Dt,b0 as qt,af as Ue,a6 as Fe,au as Vt,_ as Bt,aN as E,b1 as N,I as S,b2 as Ge,t as Xe,F as Ye,G as ze,p as Ht,b as Wt}from"./BmdC9-2Z.js";import{a as jt,l as be,s as Jt}from"./DjkWHii8.js";import{i as Gt,p as te}from"./DGLH9pEx.js";import{a as Ke,t as Qe}from"./BEN_y2CW.js";import{i as Xt}from"./osMEgwvh.js";import{f as Ze,s as Yt,b as zt,a as et}from"./BN5Zr6Pz.js";import{b as Kt,g as Qt}from"./BgPm9Szv.js";function Yr(e,t){return t}function Zt(e,t,r,a){for(var s=[],n=t.length,o=0;o<n;o++)bt(t[o].e,s,!0);var u=n>0&&s.length===0&&r!==null;if(u){var h=r.parentNode;wt(h),h.append(r),a.clear(),$(e,t[0].prev,t[n-1].next)}St(s,()=>{for(var c=0;c<n;c++){var l=t[c];u||(a.delete(l.k),$(e,l.prev,l.next)),kt(l.e,!u)}})}function zr(e,t,r,a,s,n=null){var o=e,u={flags:t,items:new Map,first:null},h=(t&We)!==0;if(h){var c=e;o=U?ie(At(c)):c.appendChild(gt())}U&&vt();var l=null,w=!1,d=Ot(()=>{var i=r();return Tt(i)?i:i==null?[]:He(i)});ht(()=>{var i=Ce(d),f=i.length;if(w&&f===0)return;w=f===0;let m=!1;if(U){var y=o.data===_t;y!==(f===0)&&(o=Ee(),ie(o),ce(!1),m=!0)}if(U){for(var p=null,v,_=0;_<f;_++){if(J.nodeType===8&&J.data===Lt){o=J,m=!0,ce(!1);break}var k=i[_],g=a(k,_);v=tt(J,u,p,null,k,g,_,s,t,r),u.items.set(g,v),p=v}f>0&&ie(Ee())}if(!U){var b=je;er(i,u,o,s,t,(b.f&Q)!==0,a,r)}n!==null&&(f===0?l?Ve(l):l=Be(()=>n(o)):l!==null&&yt(l,()=>{l=null})),m&&ce(!0),Ce(d)}),U&&(o=J)}function er(e,t,r,a,s,n,o,u){var ke,Ae,Oe,Te;var h=(s&Ct)!==0,c=(s&(_e|ye))!==0,l=e.length,w=t.items,d=t.first,i=d,f,m=null,y,p=[],v=[],_,k,g,b;if(h)for(b=0;b<l;b+=1)_=e[b],k=o(_,b),g=w.get(k),g!==void 0&&((ke=g.a)==null||ke.measure(),(y??(y=new Set)).add(g));for(b=0;b<l;b+=1){if(_=e[b],k=o(_,b),g=w.get(k),g===void 0){var P=i?i.e.nodes_start:r;m=tt(P,t,m,m===null?t.first:m.next,_,k,b,a,s,u),w.set(k,m),p=[],v=[],i=m.next;continue}if(c&&tr(g,_,b,s),g.e.f&Q&&(Ve(g.e),h&&((Ae=g.a)==null||Ae.unfix(),(y??(y=new Set)).delete(g))),g!==i){if(f!==void 0&&f.has(g)){if(p.length<v.length){var A=v[0],C;m=A.prev;var H=p[0],W=p[p.length-1];for(C=0;C<p.length;C+=1)$e(p[C],A,r);for(C=0;C<v.length;C+=1)f.delete(v[C]);$(t,H.prev,W.next),$(t,m,H),$(t,W,A),i=A,m=W,b-=1,p=[],v=[]}else f.delete(g),$e(g,i,r),$(t,g.prev,g.next),$(t,g,m===null?t.first:m.next),$(t,m,g),m=g;continue}for(p=[],v=[];i!==null&&i.k!==k;)(n||!(i.e.f&Q))&&(f??(f=new Set)).add(i),v.push(i),i=i.next;if(i===null)continue;g=i}p.push(g),m=g,i=g.next}if(i!==null||f!==void 0){for(var j=f===void 0?[]:He(f);i!==null;)(n||!(i.e.f&Q))&&j.push(i),i=i.next;var oe=j.length;if(oe>0){var pt=s&We&&l===0?r:null;if(h){for(b=0;b<oe;b+=1)(Oe=j[b].a)==null||Oe.measure();for(b=0;b<oe;b+=1)(Te=j[b].a)==null||Te.fix()}Zt(t,j,pt,w)}}h&&Z(()=>{var Le;if(y!==void 0)for(g of y)(Le=g.a)==null||Le.apply()}),ee.first=t.first&&t.first.e,ee.last=m&&m.e}function tr(e,t,r,a){a&_e&&Re(e.v,t),a&ye?Re(e.i,r):e.i=r}function tt(e,t,r,a,s,n,o,u,h,c){var l=(h&_e)!==0,w=(h&Rt)===0,d=l?w?Et(s):xe(s):s,i=h&ye?xe(o):o,f={i,v:d,k:n,a:null,e:null,prev:r,next:a};try{return f.e=Be(()=>u(e,d,i,c),U),f.e.prev=r&&r.e,f.e.next=a&&a.e,r===null?t.first=f:(r.next=f,r.e.next=f.e),a!==null&&(a.prev=f,a.e.prev=f.e),f}finally{}}function $e(e,t,r){for(var a=e.next?e.next.e.nodes_start:r,s=t?t.e.nodes_start:r,n=e.e.nodes_start;n!==a;){var o=xt(n);s.before(n),n=o}}function $(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Kr(e,t,r){Je(()=>{var a=ae(()=>t(e,r==null?void 0:r())||{});if(r&&(a!=null&&a.update)){var s=!1,n={};se(()=>{var o=r();Ut(o),s&&Ft(n,o)&&(n=o,a.update(o))}),s=!0}if(a!=null&&a.destroy)return()=>a.destroy()})}function rt(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=rt(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function rr(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=rt(e))&&(a&&(a+=" "),a+=t);return a}function Qr(e){return typeof e=="object"?rr(e):e??""}const ar=()=>performance.now(),F={tick:e=>requestAnimationFrame(e),now:()=>ar(),tasks:new Set};function at(){const e=F.now();F.tasks.forEach(t=>{t.c(e)||(F.tasks.delete(t),t.f())}),F.tasks.size!==0&&F.tick(at)}function sr(e){let t;return F.tasks.size===0&&F.tick(at),{promise:new Promise(r=>{F.tasks.add(t={c:e,f:r})}),abort(){F.tasks.delete(t)}}}function K(e,t){e.dispatchEvent(new CustomEvent(t))}function nr(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Ie(e){const t={},r=e.split(";");for(const a of r){const[s,n]=a.split(":");if(!s||n===void 0)break;const o=nr(s.trim());t[o]=n.trim()}return t}const or=e=>e;function Zr(e,t,r,a){var s=(e&Nt)!==0,n=(e&Dt)!==0,o=s&&n,u=(e&qt)!==0,h=o?"both":s?"in":"out",c,l=t.inert,w=t.style.overflow,d,i;function f(){var _=je,k=ee;Ue(null),Fe(null);try{return c??(c=r()(t,(a==null?void 0:a())??{},{direction:h}))}finally{Ue(_),Fe(k)}}var m={is_global:u,in(){var _;if(t.inert=l,!s){i==null||i.abort(),(_=i==null?void 0:i.reset)==null||_.call(i);return}n||d==null||d.abort(),K(t,"introstart"),d=he(t,f(),i,1,()=>{K(t,"introend"),d==null||d.abort(),d=c=void 0,t.style.overflow=w})},out(_){if(!n){_==null||_(),c=void 0;return}t.inert=!0,K(t,"outrostart"),i=he(t,f(),d,0,()=>{K(t,"outroend"),_==null||_()})},stop:()=>{d==null||d.abort(),i==null||i.abort()}},y=ee;if((y.transitions??(y.transitions=[])).push(m),s&&jt){var p=u;if(!p){for(var v=y.parent;v&&v.f&$t;)for(;(v=v.parent)&&!(v.f&It););p=!v||(v.f&Mt)!==0}p&&Je(()=>{ae(()=>m.in())})}}function he(e,t,r,a,s){var n=a===1;if(Pt(t)){var o,u=!1;return Z(()=>{if(!u){var y=t({direction:n?"in":"out"});o=he(e,y,r,a,s)}}),{abort:()=>{u=!0,o==null||o.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(r==null||r.deactivate(),!(t!=null&&t.duration))return s(),{abort:G,deactivate:G,reset:G,t:()=>a};const{delay:h=0,css:c,tick:l,easing:w=or}=t;var d=[];if(n&&r===void 0&&(l&&l(0,1),c)){var i=Ie(c(0,1));d.push(i,i)}var f=()=>1-a,m=e.animate(d,{duration:h});return m.onfinish=()=>{var y=(r==null?void 0:r.t())??1-a;r==null||r.abort();var p=a-y,v=t.duration*Math.abs(p),_=[];if(v>0){var k=!1;if(c)for(var g=Math.ceil(v/16.666666666666668),b=0;b<=g;b+=1){var P=y+p*w(b/g),A=Ie(c(P,1-P));_.push(A),k||(k=A.overflow==="hidden")}k&&(e.style.overflow="hidden"),f=()=>{var C=m.currentTime;return y+p*w(C/v)},l&&sr(()=>{if(m.playState!=="running")return!1;var C=f();return l(C,1-C),!0})}m=e.animate(_,{duration:v,fill:"forwards"}),m.onfinish=()=>{f=()=>a,l==null||l(a,1-a),s()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=G)},deactivate:()=>{s=G},reset:()=>{a===0&&(l==null||l(1,0))},t:()=>f()}}function ea(e,t,r=t){var a=Vt();be(e,"input",s=>{var n=s?e.defaultValue:e.value;if(n=le(e)?de(n):n,r(n),a&&n!==(n=t())){var o=e.selectionStart,u=e.selectionEnd;e.value=n??"",u!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(u,e.value.length))}}),(U&&e.defaultValue!==e.value||ae(t)==null&&e.value)&&r(le(e)?de(e.value):e.value),se(()=>{var s=t();le(e)&&s===de(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}const ue=new Set;function ta(e,t,r,a,s=a){var n=r.getAttribute("type")==="checkbox",o=e;let u=!1;if(t!==null)for(var h of t)o=o[h]??(o[h]=[]);o.push(r),be(r,"change",()=>{var c=r.__value;n&&(c=Me(o,c,r.checked)),s(c)},()=>s(n?[]:null)),se(()=>{var c=a();if(U&&r.defaultChecked!==r.checked){u=!0;return}n?(c=c||[],r.checked=c.includes(r.__value)):r.checked=Gt(r.__value,c)}),Bt(()=>{var c=o.indexOf(r);c!==-1&&o.splice(c,1)}),ue.has(o)||(ue.add(o),Z(()=>{o.sort((c,l)=>c.compareDocumentPosition(l)===4?-1:1),ue.delete(o)})),Z(()=>{if(u){var c;if(n)c=Me(o,c,r.checked);else{var l=o.find(w=>w.checked);c=l==null?void 0:l.__value}s(c)}})}function ra(e,t,r=t){be(e,"change",a=>{var s=a?e.defaultChecked:e.checked;r(s)}),(U&&e.defaultChecked!==e.checked||ae(t)==null)&&r(e.checked),se(()=>{var a=t();e.checked=!!a})}function Me(e,t,r){for(var a=new Set,s=0;s<e.length;s+=1)e[s].checked&&a.add(e[s].__value);return r||a.delete(t),Array.from(a)}function le(e){var t=e.type;return t==="number"||t==="range"}function de(e){return e===""?null:+e}function aa(e){return function(...t){var r=t[0];r.target===this&&(e==null||e.apply(this,t))}}function sa(e){return function(...t){var r=t[0];return r.stopPropagation(),e==null?void 0:e.apply(this,t)}}function na(e){return function(...t){var r=t[0];return r.preventDefault(),e==null?void 0:e.apply(this,t)}}function B(e,t){const r=window.localStorage.getItem(e),a=r?JSON.parse(r):t,s=E(a),n=s.subscribe(o=>{window.localStorage.setItem(e,JSON.stringify(o))});{const o=h=>{if(h.key===e){const c=h.newValue?JSON.parse(h.newValue):t;s.set(c)}};window.addEventListener("storage",o);const u=()=>{n(),window.removeEventListener("storage",o)};s.destroy=u}return s}const re=()=>({ref:ir(),order_type:"dine_in",room:"",customer:"Walkin",table:"",total:0,items:[]}),ir=()=>Math.floor(2147483648*Math.random()).toString(36);function cr(e){let t="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}const oa=e=>{const t=a=>{a.stopPropagation()},r=["scroll","wheel","touchmove"];return r.map(a=>e.addEventListener(a,t)),{destroy(){r.map(a=>e.removeEventListener(a,t))}}},ur=["January","February","March","April","May","June","July","August","Septemper","October","November","December"];function ia(e,t){if(!e)return"";const r=e.getFullYear(),a=e.getMonth()+1,s=e.getDate(),n=e.getHours(),o=e.getMinutes(),u=e.getSeconds(),c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()],l=ur[a-1];return t.replace(/w/g,c).replace(/yyyy/g,r.toString()).replace(/yy/g,r.toString().slice(2)).replace(/MM/g,a.toString().padStart(2,"0")).replace(/WM/g,l).replace(/dd/g,s.toString().padStart(2,"0")).replace(/HH/g,n.toString().padStart(2,"0")).replace(/mm/g,o.toString().padStart(2,"0")).replace(/ss/g,u.toString().padStart(2,"0"))}const ca=e=>e.split("_").map(t=>{var r;return(((r=t[0])==null?void 0:r.toUpperCase())||"")+t.slice(1)}).join(" "),ua=()=>{const e=Math.floor(200+Math.random()*55).toString(16).padStart(2,"0"),t=Math.floor(200+Math.random()*55).toString(16).padStart(2,"0"),r=Math.floor(200+Math.random()*55).toString(16).padStart(2,"0");return`#${e}${t}${r}`};function lr(e,t,r){const s="max-age="+new Date(Date.now()+r*24*60*60*1e3).getTime();document.cookie=`${e}=${t};${s};path=/`}function st(e){var a;const r=`; ${document.cookie}`.split(`; ${e}=`);if(r.length==2)return(a=r.pop())==null?void 0:a.split(";").shift()}var qe;const D=(qe=globalThis==null?void 0:globalThis.matchMedia)==null?void 0:qe.call(globalThis,"(prefers-reduced-motion: reduce)");N(D==null?void 0:D.matches,e=>{D==null||D.addEventListener("change",t=>{e(t.matches)})});const la=(e,t)=>{const r=a=>{e&&!e.contains(a.target)&&!a.defaultPrevented&&t()};return document.body.addEventListener("click",r,!0),{destroy(){document.body.removeEventListener("click",r,!0)}}};function dr(e){const{subscribe:t,update:r,set:a}=E(e);let s;const n=()=>{clearTimeout(s),a(e)};return{subscribe:t,set:(o,u=3e3)=>r(()=>(n(),s=setTimeout(n,u),o)),close:n}}function fr(e,t,r){try{const s=Date.now()+r*1e3,n={value:t,expiry:s};return Ze&&localStorage.setItem(e,JSON.stringify(n)),!0}catch(a){return console.error("Failed to set item in localStorage:",a),!1}}function mr(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t).value:null}catch(t){return console.error("Failed to retrieve item from localStorage:",t),null}}function pr(e){try{const t=localStorage.getItem(e);if(!t)return!0;const r=JSON.parse(t);return Date.now()>=r.expiry}catch(t){return console.error("Failed to check cache expiry from localStorage:",t),!0}}const x=B("warehouse",st("warehouse")||"");x.subscribe(e=>{lr("warehouse",e,5)});const hr=E(""),nt=E("");function gr(){let e;return globalThis.AbortController&&(e=new globalThis.AbortController),e}function vr(e,t){return(r,a)=>e(r,{signal:t==null?void 0:t.signal,...a||{}})}const T=(e,t,r="",a=1e3*60*60*24,s=!1)=>{const n=E({loading:!1,error:null,data:t}),{subscribe:o}=n,u=()=>S(n);let h,c;const l=async(i,f=!1,m="")=>{const y=u();c=i;const p=`cache-${m}-${r}`,v=p?mr(p):void 0,_=p?pr(p):!0;if(!f&&v&&!_){const A={data:v[0],error:v[1],loading:!1};return n.update(()=>A),A}if(y.loading)return await new Promise(A=>{const C=o(H=>{H.loading||(setTimeout(()=>{try{C()}catch(W){console.log(W)}},3e3),A(H))})});h&&h.abort(),h=gr();const k=vr(fetch,h);n.update(A=>({...A,loading:!0}));const[g,b]=await e(i,k);if(b&&v&&!v[1]){const A={data:v[0],error:v[1],loading:!1};return n.update(()=>A),A}a&&p&&fr(p,[g,b],a);const P={data:g,error:b,loading:!1};return n.update(()=>P),P};return s&&Ze&&x.subscribe(i=>{l(c,!0,i)}),{subscribe:o,load:l,get:u,asyncGet:()=>new Promise(i=>{const f=u();if(!f.loading)return i(f);const m=n.subscribe(y=>{if(!y.loading){i(y);try{setTimeout(m,1e3)}catch(p){console.log(p)}}})}),startFakeLoading:()=>{n.update(i=>({...i,loading:!0}))}}};new TextEncoder;const R=async(e="beep")=>{try{await new Audio(Kt+`/sounds/${e}.mp3`).play()}catch(t){console.log(t)}};function ge(e,t,r=5e3,a){if(ct.update(s=>[...s,{id:Math.random().toString(),type:e,message:t,timeout:r}]),a)R(a);else switch(e){case"success":R("submit");break;case"warning":R("alert");break;case"danger":R("error")}}function da(e){ct.update(t=>t.filter(r=>r.id!==e))}const _r="",O=()=>{var t;const e=(t=globalThis.location)==null?void 0:t.origin;return e||_r};async function L(e,t={},r=fetch){var i,f,m,y,p,v,_,k;typeof e=="string"&&(e=new URL(e,O()));const{authToken:a=S(hr),body:s,formBody:n,...o}=t,u=new Headers(o.headers);u.has("Content-Type")||(n&&typeof n=="string"?u.set("Content-Type","application/x-www-form-urlencoded"):s&&u.set("Content-Type","application/json")),a&&u.set("Authorization",a),u.set("Accept","application/json");const h=S(nt);h&&u.set("x-frappe-csrf-token",h),u.set("x-warehouse",S(x)||st("warehouse")||"");const c={method:"GET",headers:u,credentials:"include",...o};(s||n)&&(c.body=n||JSON.stringify(s),console.log("options.body",{body:s,formBody:n}));let l;try{l=await r(e,c)}catch(g){return console.error("Fetch Error",e,g),ge("success","Failed connecting"),{data:null,error:"Failed connecting",status:0}}let w="",d;try{d=await l.json()}catch(g){console.error(g,e,l.status)}if(!l.ok){const g=((k=(_=(v=(p=(y=(m=(f=(i=d==null?void 0:d.exception)==null?void 0:i.split)==null?void 0:f.call(i,":"))==null?void 0:m[0])==null?void 0:y.split)==null?void 0:p.call(y,"."))==null?void 0:v.reverse)==null?void 0:_.call(v))==null?void 0:k[0])||(d==null?void 0:d.exc_type)||"Fetch Error";console.error(g,e,l.status,d),w=(d==null?void 0:d.error)||d||""}return typeof w=="string"&&w&&ge("danger",w),{data:l.ok?(d==null?void 0:d.data)||(d==null?void 0:d.message)||d:null,error:w,status:l.status}}const yr=()=>T(async e=>{const t=new URL(O()+"/api/method/jokoor_hotel.get_csrf_token"),{data:r,status:a,error:s}=await L(t,e);return s||a!==200?(Qt("/login"),["",s||"An error occurred"]):[r||"",null]},"","get_csrf_token",0,!1),br=()=>T(async e=>{const t=new URL(O()+"/api/method/jokoor_pos.resource.api.v1.get_user_session"),{data:r,status:a,error:s}=await L(t,e);return s||a!==200?[{},s||"An error occurred"]:[r,""]},{},"getUserSession",0,!1),fa=e=>T(async()=>{console.log("Params",e);const t=new URL(O()+"/api/method/jokoor_pos.resource.api.v1.open_shift"),{data:r,status:a,error:s}=await L(t,{method:"POST",body:e});return s||a!==200?["",s||"An error occurred"]:[r||"",null]},"","openShift",0,!1),wr=()=>T(async()=>{const e=new URL(O()+"/api/method/jokoor_pos.resource.api.v1.get_shift_sales"),{data:t,status:r,error:a}=await L(e);return a||r!==200?[{},a||"An error occurred"]:[t||"",null]},{},"getShiftSales",0),ma=()=>T(async e=>{const t=new URL(O()+"/api/method/jokoor_pos.resource.api.v1.close_shift"),{data:r,status:a,error:s}=await L(t,{method:"POST",body:e});return s||a!==200?["",s||"An error occurred"]:[r||"",null]},"","closeShift",0,!1),Sr=()=>T(async e=>{const t=new URL(O()+"/api/method/jokoor_pos.resource.api.v1.get_all_items"),{data:r,status:a,error:s}=await L(t,e);return s||a!==200?[[],s||"An error occurred"]:[(r==null?void 0:r.map(o=>(o.ref=o.order_id,o)))||[],null]},[],"getProducts",3600,!0),kr=(e,t=!1)=>T(async()=>{const r=new URL(O()+"/api/method/jokoor_pos.resource.api.v1.create_draft_order");t&&r.searchParams.append("is_merged",t.toString());const{data:a,status:s,error:n}=await L(r,{method:"POST",body:e});return n||s!==200?["",n||"An error occurred"]:[a||"",null]},"","createDraftFoodOrder",0,!1),ot=e=>T(async()=>{const t=new URL(O()+"/api/method/jokoor_pos.resource.api.v1.delete_draft_order");t.searchParams.append("order_id",e);const{data:r,status:a,error:s}=await L(t,{method:"GET"});return s||a!==200?["",s||"An error occurred"]:[r||"",null]},"","deleteDraftFoodOrder",0,!1),Ar=e=>T(async()=>{const t=new URL(O()+"/api/method/jokoor_pos.resource.api.v1.submit_order"),{data:r,status:a,error:s}=await L(t,{method:"POST",body:e});return s||a!==200?["",s||"An error occurred"]:[r||"",null]},"","createQuickFoodOrder",0,!1),Or=()=>T(async()=>{const e=new URL(O()+"/api/method/jokoor_restaurant.api.get_restaurant_tables"),{data:t,status:r,error:a}=await L(e);return a||r!==200?[[],a||"An error occurred"]:[t||[],null]},[],"getRestaurantTables",3600,!0),Tr=()=>T(async()=>{const e=new URL(O()+"/api/method/jokoor_restaurant.api.get_customers"),{data:t,status:r,error:a}=await L(e);return a||r!==200?[[],a||"An error occurred"]:[t||[],null]},[],"getCustomers",3600,!0),Lr=()=>T(async()=>{const e=new URL(O()+"/api/method/jokoor_restaurant.api.get_rooms"),{data:t,status:r,error:a}=await L(e);return a||r!==200?[[],a||"An error occurred"]:[t||[],null]},[],"getRooms",3600,!0),Cr=()=>T(async()=>{const e=new URL(O()+"/api/method/jokoor_pos.resource.api.v1.get_draft_orders"),{data:t,status:r,error:a}=await L(e);return a||r!==200?[[],a||"An error occurred"]:[(t||[]).map(n=>({...n,ref:n.order_id||""})),null]},[],"getOngoingOrders",0,!0),Er=()=>T(async()=>{const e=new URL(O()+"/api/method/jokoor_restaurant.api.get_payment_methods"),{data:t,status:r,error:a}=await L(e);return a||r!==200?[[],a||"An error occurred"]:[t,null]},[],"getPaymentMethods",0,!0),Rr=()=>T(async()=>{const e=new URL(O()+"/api/method/jokoor_restaurant.config.config.restaurant_settings"),{data:t,status:r,error:a}=await L(e);return a||r!==200?[{},a||"An error occurred"]:[t,null]},{},"getPosSettings",0,!0),pa=e=>T(async()=>{const t=new URL(O()+"/api/method/jokoor_restaurant.api.create_customer"),{data:r,status:a,error:s}=await L(t,{method:"POST",body:e});return s||a!==200?[{},s||"Failed to create customer"]:[r,null]},{},"create_customer",0,!1),ha=(e,t)=>t.find(r=>{var a;return(a=r.barcodes)==null?void 0:a.includes(e)})||null,Ne=E(!1),ga=async(e=!1)=>{Ne.set(!0),await it.load(void 0,e),await ut.load(void 0,e),await lt.load(void 0,e),await dt.load(void 0,e),await ft.load(void 0,e),await V.load(void 0,e),await Mr.load(void 0,e),Ne.set(!1),ge("success","Items refreshed",8e3,"startup")},we=E(),xr=E(),Ur=E([]),va=E(),Fr=yr(),$r=br(),Ir=wr(),it=Rr();Fr.subscribe(e=>{e.data&&nt.set(e.data)});$r.subscribe(e=>{e.data&&xr.set(e.data)});it.subscribe(e=>{if(e.data){const t=e.data.warehouses||[];t.length===0&&t.push(e.data.default_warehouse||"");const r=S(x);(!r||!t.includes(r))&&x.set(t[0]),Ur.set(t.map(a=>({name:a,value:a})))}});const ct=E([]),X="All Items",ut=Sr(),_a=N({},e=>{Ir.subscribe(t=>{console.log(t),e(t.data)})}),lt=Or(),dt=Lr(),ft=Tr(),Mr=Er(),V=Cr(),q=dr(),Se=B("warehouseCurrentOrders",{}),ne=Ge([Se,x],([e,t],r)=>{if(!t){r(re());return}const a=e[t];r(a||re())}),M=e=>{const t=S(x);t&&Se.update(r=>({...r,[t]:e}))};x.subscribe(e=>{e&&Se.update(t=>t[e]?t:{...t,[e]:re()})});const ya=E(),ba=E(),wa=E(!1),fe=B("activeCategory",X),I=E(!1),Y=N([],e=>{ut.subscribe(t=>{e(t.data)})}),Sa=N([],e=>{ft.subscribe(t=>{e(t.data.map(r=>({value:r.name,...r})))})}),ka=N([],e=>{lt.subscribe(t=>{e(t.data)})});N([],e=>{dt.subscribe(t=>{console.log("roomOptions",t),e(t.data.map(r=>({value:r.name,name:r.room_name})))})});const z=B("ongoingWarehouseOrders",{}),Aa=Ge([z,x],([e,t],r)=>{if(!t){r([]);return}const a=e[t]||[];r(a)});setInterval(async()=>{const e=V.get().data||[],t=(await V.load(void 0,!0)).data||[];e.length!==t.length&&R("alert")},8e3);V.subscribe(e=>{const t=S(x);!t||!e.data||z.update(r=>({...r,[t]:e.data}))});x.subscribe(e=>{e&&z.update(t=>t[e]?t:{...t,[e]:[]})});const Oa=N([],e=>{Y.subscribe(t=>{e([X,...Array.from(new Set((t||[]).map(r=>String(r.category).trim()).filter(Boolean)))])})}),me=B("search",""),pe=(e,{search:t="",activeCategory:r=X}={})=>(r||(r=X),e.filter(a=>{const s=a.product_name.toLowerCase(),n=t.toLowerCase(),o=s.includes(n)||a.category.includes(n)||n.includes(a.category)||n.includes(s),u=r==X||a.category==r;return o&&u})),Ta=N([],function(t){const r=Y.subscribe(n=>{const o=S(fe),u=S(me);t(pe(n,{search:u,activeCategory:o}))}),a=fe.subscribe(n=>{const o=S(me),u=S(Y);t(pe(u,{search:o,activeCategory:n}))}),s=me.subscribe(n=>{const o=S(fe),u=S(Y);t(pe(u,{search:n,activeCategory:o}))});return function(){r(),a(),s()}}),La=B("isGridView",!0);var Nr=Qe("<section><!></section>");function Ca(e,t){let r=te(t,"class",8,""),a=te(t,"paddingX",8,"16px");var s=Nr(),n=Ye(s);Yt(n,t,"default",{}),ze(s),Xe(()=>{zt(s,`container-max-width mx-auto ${r()??""}`),et(s,"style",`--container-padding: ${a()??""}`)}),Ke(e,s)}const Ea=()=>{M(re())},Pe=e=>S(Y).find(t=>t.qty),Ra=(e,t)=>{var n;if(!e)return;const r=S(ne);if((n=e.variants)!=null&&n.length&&!t)return!1;const a=t?t.name:e.name,s=r.items.find(o=>o.name===a);if(s)s.quantity++,M({...r,items:[...r.items]});else{const o=[...r.items,{...e,name:a,product_name:(t==null?void 0:t.product_name)||e.product_name,price:(t==null?void 0:t.price)||e.price,quantity:1}];M({...r,items:o})}return q.set(a),R("beep"),!0},xa=e=>{if(!e)return;const t=S(ne),r=t.items.find(s=>s.name===e);if(r){const s=Pe();if(s&&s.qty<=r.quantity){R("error"),q.set(e);return}r.quantity++,t.items=t.items.map(n=>n.name===e?r:n),M({...t,items:[...t.items]}),q.set(e),R("beep");return}const a=Pe();if(a){const s=[...t.items,{...a,quantity:1}];M({...t,items:s}),q.set(e),R("beep")}},Ua=e=>{if(!e)return;const t=S(ne),r=t.items.find(a=>a.name===e);r&&(r.quantity>1?(r.quantity--,t.items=t.items.map(a=>a.name===e?r:a),M({...t,items:[...t.items]}),R("beep")):(t.items=t.items.filter(a=>a.name!==e),M({...t,items:[...t.items]}),R("delete")),q.set(e))},Fa=e=>{if(!e)return;const t=S(ne),r=t.items.filter(a=>a.name!==e);M({...t,items:r}),R("delete"),q.set(e)},Pr=async(e,t=!1)=>{const r=S(x);if(!r){console.warn("No warehouse selected, skipping ongoing order update");return}I.set(!0);try{const a=await kr({...e,order_id:e.order_id||"",ref:e.order_id||e.ref||"",is_paid:e.is_paid||0,service_charges:e.service_charges||0},t).load();if(a.error)return I.set(!1),a.error;const{data:s}=await V.load();return z.update(n=>({...n,[r]:(s.length===0?[{...e,order_id:a.data}]:s)||[]})),I.set(!1),null}catch(a){return I.set(!1),String(a)}},$a=async(e,t=!1,r=!1)=>{if(!e)return;I.set(!0),t?e.is_paid=0:e.is_paid=1,e.order_type==="room_service"&&r?e.service_charges=r?1:0:e.service_charges=0,e.order_id=e.order_id||"";let a=!1;const s=[...e.prev_refs||[]],n=[...e.prev_order_ids||[]];for(const h of n)a=!0;if(e.prev_order_ids&&delete e.prev_order_ids,e.prev_refs&&delete e.prev_refs,a){const h=await Pr(e,a);for(const c of n)await ot(c).load(),a=!0;for(const c of s)ve();return h}const{data:o,error:u}=await Ar(e).load();if(I.set(!1),!u)return ve(e.ref),o},Ia=async e=>{I.set(!0),await ot(e.order_id||"").load(),await ve(e.ref),I.set(!1)},ve=async e=>{const t=S(x);if(t)try{const r=await V.load();return r.error?r.error:(z.update(a=>({...a,[t]:r.data||[]})),null)}catch(r){return String(r)}},Ma=()=>{var e,t;(t=(e=S(we))==null?void 0:e.action)==null||t.call(e),Dr(),R("delete")},Dr=()=>{we.set(void 0)},Na=(e,t,r)=>(r&&R(r),()=>we.set({action:e,title:t})),qr=e=>e;function mt(e){const t=e-1;return t*t*t+1}function De(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function Pa(e,{delay:t=0,duration:r=400,easing:a=qr}={}){const s=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:a,css:n=>`opacity: ${n*s}`}}function Da(e,{delay:t=0,duration:r=400,easing:a=mt,x:s=0,y:n=0,opacity:o=0}={}){const u=getComputedStyle(e),h=+u.opacity,c=u.transform==="none"?"":u.transform,l=h*(1-o),[w,d]=De(s),[i,f]=De(n);return{delay:t,duration:r,easing:a,css:(m,y)=>`
			transform: ${c} translate(${(1-m)*w}${d}, ${(1-m)*i}${f});
			opacity: ${h-l*y}`}}function qa(e,{delay:t=0,duration:r=400,easing:a=mt,axis:s="y"}={}){const n=getComputedStyle(e),o=+n.opacity,u=s==="y"?"height":"width",h=parseFloat(n[u]),c=s==="y"?["top","bottom"]:["left","right"],l=c.map(p=>`${p[0].toUpperCase()}${p.slice(1)}`),w=parseFloat(n[`padding${l[0]}`]),d=parseFloat(n[`padding${l[1]}`]),i=parseFloat(n[`margin${l[0]}`]),f=parseFloat(n[`margin${l[1]}`]),m=parseFloat(n[`border${l[0]}Width`]),y=parseFloat(n[`border${l[1]}Width`]);return{delay:t,duration:r,easing:a,css:p=>`overflow: hidden;opacity: ${Math.min(p*20,1)*o};${u}: ${p*h}px;padding-${c[0]}: ${p*w}px;padding-${c[1]}: ${p*d}px;margin-${c[0]}: ${p*i}px;margin-${c[1]}: ${p*f}px;border-${c[0]}-width: ${p*m}px;border-${c[1]}-width: ${p*y}px;min-${u}: 0`}}var Vr=Qe('<label class="small-text mb-2 block font-medium"> </label>');function Va(e,t){Ht(t,!1);let r=te(t,"id",24,()=>cr(5)),a=te(t,"text",8,"");Xt();var s=Vr(),n=Ye(s,!0);ze(s),Xe(()=>{et(s,"for",r()),Jt(n,a())}),Ke(e,s),Wt()}export{ga as $,fe as A,aa as B,Ca as C,ua as D,Ra as E,na as F,M as G,pa as H,ne as I,Pr as J,Ea as K,Va as L,ka as M,Sa as N,Ua as O,xa as P,Fa as Q,q as R,ha as S,Ta as T,me as U,La as V,Fr as W,nt as X,$r as Y,x as Z,va as _,wa as a,Ur as a0,Ne as a1,I as a2,Ir as a3,z as a4,ma as a5,Da as a6,Mr as a7,oa as a8,$a as a9,ir as aa,ta as ab,fa as ac,T as ad,L as ae,_a as af,ca as ag,Dr as ah,Ma as ai,da as aj,ct as ak,we as al,ya as b,xr as c,Ia as d,zr as e,ge as f,qa as g,Kr as h,Yr as i,ea as j,la as k,Qr as l,ba as m,O as n,Aa as o,it as p,ft as q,cr as r,Na as s,Zr as t,ia as u,ra as v,sa as w,R as x,Pa as y,Oa as z};
