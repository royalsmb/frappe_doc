import{g as i}from"../chunks/localStore.svelte.CLi1O892.js";import{r}from"../chunks/index.De_1-CT6.js";import{f as p}from"../chunks/fetcher.ASb0Z7gL.js";import"../chunks/disclose-version.BIyVqMZ8.js";import{p as m,a as c}from"../chunks/runtime.DQwr1dzu.js";import{D as l}from"../chunks/dink-bg.gkRPRQFX.js";import{C as u}from"../chunks/Container.CbVs3Ov9.js";import{o as f}from"../chunks/index-client.BB2O3VKd.js";import{g as y}from"../chunks/entry.BDn221P8.js";const d=async({url:t,parent:a})=>{var s;await a();const o=i("booking");if(i("courts"),!((s=o==null?void 0:o.court_location)!=null&&s.name))throw r(300,"/buy/play-now");if(!(o!=null&&o.date))throw r(300,"/buy/play-now/date-time");if(!(o!=null&&o.player))throw r(300,"/buy/play-now/choose-players");const{data:e,error:n}=await p("/api/method/dinks.api.create_booking",{method:"POST",body:{...o,pay_at_court:t.searchParams.get("pay_at_court")}});if(n)throw r(300,"/buy/play-now/overview");return{booking:e.booking,p:t.searchParams.get("razorpay_invoice_status")!=="paid"?0:1}},O=Object.freeze(Object.defineProperty({__proto__:null,load:d},Symbol.toStringTag,{value:"Module"}));function T(t,a){m(a,!0),f(()=>{setTimeout(()=>{const o=new URLSearchParams({booking:a.data.booking});y("/buy/play-now/your-booking?"+o)},2e3)}),u(t,{children:(o,e)=>{l(o,{class:"absolute left-0 top-0 h-full w-full"})},$$slots:{default:!0}}),c()}export{T as component,O as universal};
