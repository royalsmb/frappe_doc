# Copyright (c) 2025, jokoor and contributors
# For license information, please see license.txt

# import frappe
from frappe.model.document import Document


class SMSCampaign(Document):
	def after_insert(self):
		group = frappe.get_doc("SMS Contact Group", self.contact_group)
		for contact in group.contacts:
			recipient = frappe.get_doc("SMS Contact", contact.phone)
			sms = frappe.get_doc({
				"doctype":"SMS",
				"sender":self.sender,
				"recipient":recipient.name,
				"phone":recipient.phone,
				"message":self.message,
				"type":"Campaing",
				"campaign_id":self.name
			})
			
		
