import{d as $,f as fe,a as w,n as le,t as O,c as ee}from"./BEN_y2CW.js";import{i as ue}from"./osMEgwvh.js";import{n as he,p as _e,c as pe,q as be,u as ge,e as te,i as ye,r as ae,v as we,t as xe,w as Ce,x as ke,y as Se}from"./a-IolG5s.js";import{d as ze,h as re,e as se,n as De,u as ne,al as Ne,ao as Pe,am as Ae,i as Ee,aj as Fe,aE as Le,p as de,I as Re,w as Ie,F as a,c as o,G as t,f as J,t as X,g as D,b as ce,l as ie,a as Me,B as oe}from"./BmdC9-2Z.js";import{s as h,e as qe}from"./DjkWHii8.js";import{a as L,r as Oe,t as Te,b as je}from"./BN5Zr6Pz.js";import{p as d,d as Be}from"./DGLH9pEx.js";import"./BgPm9Szv.js";import{i as Y}from"./BkN_-G9U.js";function Ue(_,e,r,s,p){var c=_,n="",l;ze(()=>{if(n===(n=e()??"")){re&&se();return}l!==void 0&&(Le(l),l=void 0),n!==""&&(l=De(()=>{if(re){ne.data;for(var f=se(),x=f;f!==null&&(f.nodeType!==8||f.data!=="");)x=f,f=Ne(f);if(f===null)throw Pe(),Ae;$(ne,x),c=Ee(f);return}var N=n+"",C=fe(N);$(Fe(C),C.lastChild),c.before(C)}))})}var We=le('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="close"><g id="Close Square"><path id="Stroke 1 (Stroke)" fill-rule="evenodd" clip-rule="evenodd" d="M18.701 5.29807C19.0916 5.6886 19.0916 6.32176 18.701 6.71229L6.71356 18.6998C6.32303 19.0903 5.68987 19.0903 5.29934 18.6998C4.90882 18.3093 4.90882 17.6761 5.29934 17.2856L17.2868 5.29807C17.6774 4.90755 18.3105 4.90755 18.701 5.29807Z" fill="black"></path><path id="Stroke 2 (Stroke)" fill-rule="evenodd" clip-rule="evenodd" d="M5.29295 5.29285C5.68352 4.90237 6.31668 4.90243 6.70717 5.293L18.7047 17.293C19.0951 17.6836 19.0951 18.3167 18.7045 18.7072C18.3139 19.0977 17.6808 19.0976 17.2903 18.7071L5.2928 6.70706C4.90232 6.3165 4.90239 5.68333 5.29295 5.29285Z" fill="black"></path></g></g></svg>');function it(_){var e=We();w(_,e)}async function Ze(_){return new Promise((e,r)=>{try{const s=document.createElement("iframe");s.style.display="none",s.src=_;const p=()=>{document.body.contains(s)&&document.body.removeChild(s)};s.onerror=c=>{p(),r(new Error(`Failed to load PDF: ${c}`))},s.onload=function(){try{const c=s.contentWindow;if(!c)throw new Error("Content window is not available");c.focus(),c.print(),setTimeout(()=>{p(),e()},1e3)}catch(c){p(),r(new Error(`Failed to print PDF: ${c}`))}},document.body.appendChild(s)}catch(s){r(new Error(`Failed to initialize printing: ${s}`))}})}async function ot(_){return new Promise((e,r)=>{try{const s=he()+`/api/method/jokoor_pos.resource.api.pdf.generate_pdf_url?order_id=${_}`;Ze(s).then(e).catch(r)}catch(s){r(new Error(`Failed to print order: ${s}`))}})}var Xe=O('<p class="capitalize"> </p> <p class="font-medium"> </p>',1),Ge=O('<tr class="border-b bg-white font-semibold text-secondary hover:bg-light/30"><td class="svelte-vbvsea"> </td><td class="svelte-vbvsea"> </td><td class="svelte-vbvsea"> </td><td class="svelte-vbvsea"> </td></tr>'),He=O('<div class="print hidden w-full"><section class=" mx-auto flex flex-col items-center justify-center gap-4"><div class="grid place-items-center font-semibold"><img class="mb-2 h-24 max-w-full object-contain" alt="baobab"> <h1> </h1> <p> </p> <p> </p></div> <div class="flex w-full flex-col gap-2"><h2 class="text-center font-bold">Sales Receipt</h2> <div class="grid grid-cols-2 gap-1"></div></div> <table class="small-text w-full table-auto border-collapse border-spacing-2 select-none rounded border text-left text-secondary"><thead class="sticky top-0 bg-light text-xs uppercase text-secondary"><tr><th class="svelte-vbvsea">Product</th><th class="svelte-vbvsea">Qty</th><th class="svelte-vbvsea">Price</th><th class="svelte-vbvsea">Amount</th></tr></thead><tbody></tbody></table> <p class="grid w-full grid-cols-2 justify-between gap-2 font-semibold"><span> </span> <span class="text-xl"> </span></p></section></div>');function lt(_,e){de(e,!0);const r=_e.get().data||{};let s=d(e,"cashierName",19,()=>{var m;return((m=Re(pe))==null?void 0:m.fullname)||"N/A"}),p=d(e,"businessName",19,()=>r.business_name),c=d(e,"heroImage",19,()=>r.print_logo),n=d(e,"address",19,()=>r.address),l=d(e,"contact",19,()=>r.contact);const x=be.get().data.find(m=>m.name===e.order.customer),N=x!=null&&x.is_management?"Management":e.isCredit?"Credit":"Cash",C={date:ge(new Date(Date.now()),"w, WM dd, yyyy"),"receipt no":String(e.order.order_id).slice(-4),...e.order.order_type==="room_service"?{"order type":e.order.order_type}:{},...e.completed?{"payment method":e.order.payment_method}:{},"order status":e.completed?"Completed":"Pending","payment type":N,name:e.order.order_type==="room_service"?"":e.order.customer,...e.order.order_type==="room_service"?{"Room Number":e.order.room}:{},"table no":e.order.table,cashier:s()};Ie(()=>{console.log({isCredit:e.isCredit})});var R=He(),T=a(R),u=a(T),b=a(u),P=o(b,2),A=a(P,!0);t(P);var E=o(P,2),G=a(E,!0);t(E);var j=o(E,2),B=a(j,!0);t(j),t(u);var I=o(u,2),U=o(a(I),2);te(U,21,()=>Object.entries(C),ye,(m,g)=>{let S=()=>D(g)[0],q=()=>D(g)[1];var Z=Xe(),z=J(Z),Q=a(z);t(z);var F=o(z,2),V=a(F,!0);t(F),X(()=>{h(Q,`${S()??""}:`),h(V,q()||"N/A")}),w(m,Z)}),t(U),t(I);var i=o(I,2),v=o(a(i));te(v,21,()=>e.order.items,m=>m.name,(m,g)=>{var S=Ge(),q=a(S),Z=a(q,!0);t(q);var z=o(q),Q=a(z,!0);t(z);var F=o(z),V=a(F);t(F);var K=o(F),ve=a(K);t(K),t(S),X(me=>{h(Z,D(g).name),h(Q,D(g).quantity),h(V,`D${D(g).price??""}`),h(ve,`D${me??""}`)},[()=>Number(D(g).price)*Number(D(g).quantity)]),w(m,S)}),t(v),t(i);var W=o(i,2),M=a(W),H=a(M);t(M);var y=o(M,2),k=a(y);t(y),t(W),t(T),t(R),X(()=>{L(b,"src",c()),h(A,p()),h(G,n()),h(B,l()),h(H,`Amount ${(e.completed?e.isCredit||e.order.order_type==="Staff"?"Credited":"Paid":"Due")??""}:`),h(k,`D${e.order.total??""}`)}),w(_,R),ce()}var Qe=le('<path class="translate-x-[-0.5px] translate-y-[-1px] fill-accent" d="M17.392 7.39194C17.1784 7.23702 16.9123 7.17279 16.6515 7.21325C16.3908 7.25371 16.1566 7.39558 16 7.60794L11.008 14.3999L7.80802 11.8479C7.59585 11.6824 7.32662 11.608 7.05957 11.641C6.79252 11.674 6.54951 11.8118 6.38402 12.0239C6.21852 12.2361 6.14409 12.5053 6.1771 12.7724C6.21011 13.0394 6.34785 13.2824 6.56002 13.4479L10.56 16.6479C10.7485 16.773 10.9754 16.8269 11.2 16.7999C11.3552 16.7993 11.5081 16.7629 11.6468 16.6935C11.7856 16.6242 11.9064 16.5237 12 16.3999L17.6 8.79994C17.6796 8.69415 17.7375 8.5736 17.7701 8.44529C17.8028 8.31698 17.8096 8.18345 17.7903 8.05247C17.7709 7.92149 17.7258 7.79565 17.6574 7.68226C17.589 7.56888 17.4988 7.47019 17.392 7.39194Z" fill="currentColor"></path>'),Ve=O('<span class="icon-parent h-[--icon-size] w-[--icon-size] min-w-[--icon-size]"><!></span>'),Ye=O('<label class="body-1 relative inline-flex cursor-pointer select-none items-center gap-2"><input type="checkbox" hidden class="hidden"> <span><svg class="absolute inset-0 !h-[--inner-size] !w-[--inner-size]" width="23" height="23" viewBox="0 0 23 23" fill="none" stroke="none" xmlns="http://www.w3.org/2000/svg"><!></svg></span> <!> </label>');function dt(_,e){de(e,!1);let r=d(e,"checked",12,!1),s=d(e,"id",24,()=>"checkbox-"+ae(5)),p=d(e,"icon",8,void 0),c=d(e,"name",24,()=>ae(5)),n=d(e,"group",28,()=>[]),l=d(e,"value",8,""),f=d(e,"text",8),x=d(e,"title",8,""),N=d(e,"disabled",8,!1),C=d(e,"size",8,24);const R=i=>{if(n()||n([]),i){if(n().includes(l()))return;n(Array.from(new Set([...n(),l()])));return}n().includes(l())&&n(n().filter(v=>v!=l()))},T=i=>{i||(i=[]);const v=i.includes(l());v!==r()&&r(v)};ie(()=>oe(n()),()=>{T(n())}),ie(()=>oe(r()),()=>{R(r())}),Me(),ue();var u=Ye(),b=a(u);Oe(b);var P,A=o(b,2),E=a(A),G=a(E);{var j=i=>{var v=Qe();xe(3,v,()=>Se,()=>({duration:20})),w(i,v)};Y(G,i=>{r()&&i(j)})}t(E),t(A);var B=o(A,2);{var I=i=>{var v=Ve(),W=a(v);{var M=y=>{var k=ee(),m=J(k);Ue(m,p),w(y,k)},H=y=>{var k=ee(),m=J(k);Be(m,p,(g,S)=>{S(g,{})}),w(y,k)};Y(W,y=>{typeof p()=="string"?y(M):y(H,!1)})}t(v),w(i,v)};Y(B,i=>{p()&&i(I)})}var U=o(B);t(u),X(()=>{L(u,"for",s()),L(u,"style",`--size: ${C()??""}px; --inner-size: ${C()-1}px; --icon-size: 16px;`),L(u,"title",x()),Te(u,"cursor-not-allowed",N()),b.disabled=N(),L(b,"name",c()),P!==(P=l())&&(b.value=(b.__value=l())==null?"":l()),L(b,"id",s()),je(A,`relative h-[--inner-size] w-[--inner-size] border-secondary/40 bg-white transition-colors duration-[20ms] ${(r()?"!border-accent":"")??""} rounded-[3px] border-2`),h(U,` ${f()??""}`)}),we(b,r),qe("click",u,Ce(()=>{ke("click")})),w(_,u),ce()}export{dt as C,lt as R,it as X,ot as p};
